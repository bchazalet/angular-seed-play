<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
    <title>
        Angular Seed for Play Framework - Activator Template
    </title>
</head>
<body>
<div>
    <h2>
        AngularJS, WebJars, Play Framework
    </h2>

    <p>
        This tutorial describes the use of <a href="http://angularjs.org/" target="_blank">AngularJS</a>,
        <a href="http://requirejs.org/" target="_blank">RequireJS</a> and
        <a href="http://www.webjars.org/" target="_blank">WebJars</a> using the
        <a href="http://www.playframework.com/" target="_blank">Play Framework</a>.
        An overview will first be provided of each technology. You will then you guided through how to use
        these technologies with Play.
    </p>

    <p>
        This tutorial will take you about 10 minutes. You will be pleasantly surprised with how little there
        is to be done when using Play and AngularJS, or JavaScript in general for that matter!
    </p>
</div>
<div>
    <h2>
        AngularJS
    </h2>

    <p>
        AngularJS lets you extend HTML vocabulary for your application. The resulting environment is expressive,
        readable, and quick to develop with. We have based this angular-seed-play project on the
        <a href="https://github.com/angular/angular-seed" target="_blank">angular-seed</a> project which is the
        official starting point when writing new AngularJS applications.
    </p>

    <p>
        An advantage of using Play along with its RequireJS integration is that you will see a reduction in the
        code required when compared with the original angular-seed project. The resulting code should also be
        easier to maintain given the management of library versions.
    </p>
</div>
<div>
    <h2>
        RequireJS
    </h2>

    <p>
        RequireJS is a popular implementation of the
        <a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank">AMD</a> specification -
        a means by which JavaScript applications can be modularised. The easiest way of thinking about AMD is
        that it is JavaScript's equivalent of package and import statements (or namespace and include
        statements depending on your preferences!).
    </p>
</div>
<div>
    <h2>
        WebJars
    </h2>

    <p>
        WebJars are zip files containing HTML, CSS, images, JavaScript and other web resources along with
        a computer-readable description of the library.
    </p>

    <p>
        Managing the versions and dependencies of JavaScript libraries is just as important as for any other
        language. Let's say that your favorite library is required and that it has a dependency on jQuery.
        Ordinarily you would be required to ensure that jQuery is loaded before your library otherwise there
        will be errors. When using your favorite library's WebJar, jQuery is declared as a dependency such that
        it will be loaded automatically.
    </p>

    <p>
        These WebJars are deployed to well known repositories including Maven Central. There are many popular
        JavaScript libraries already available as WebJars and the number is increasing. WebJars utilize familiar
        and established repositories instead of relying on newly introduced ones. Many organisations are already
        using and hosting Maven and Ivy based repositories so it makes sense to leverage them. To further support
        this, over 8 billion downloads occurred on Maven Central in 2012.
    </p>
</div>
<div>
    <h2>
        JavaScript and Play
    </h2>

    <p>
        The first thing to state is that we want to make developing web applications in conjunction with Play
        as familiar as possible when it comes to authoring JavaScript. To use a WebJar the programmer declares
        its dependency in Play's <a href="#code/build.sbt" class="shortcut">build.sbt</a> file.
        This file describes a Play project in a similar way that a
        <a href="http://maven.apache.org/pom.html" target="_blank">Maven pom</a> or
        <a href="https://npmjs.org/doc/json.html" target="_blank">NPM's package.json</a> does.
    </p>

    <p>
        WebJars can be used without anything special in Play, however there is a convenience library called 
        <code>webjars-play</code> that provides some helper utilities:
        <pre><code>"org.webjars" %% "webjars-play" % "2.2.1-1"</code></pre>
    
        The only explicit WebJar dependency defined is for AngularJS:
        <pre><code>"org.webjars" % "angularjs" % "1.2.13"</code></pre>
    
        WebJars can have transitive dependencies but in the case of AngularJS there are no transitive dependencies.
        However, the <code>webjars-play</code> library transitively depends on RequireJS which is used by this project.
    </p>

    <p>
        Knowledge of Scala is not required in order to declare dependencies. The above constitutes the total
        amount of Scala that you actually need to deal with. The
        <a href="http://www.webjars.org/" target="_blank">WebJars website</a> allows the easy selection of a
        WebJar and its version and then outputs the declaration required to download it for Play, SBT, Maven,
        Gradle and other build tools.
    </p>
</div>
<div>
    <h2>Routes</h2>

    <p>
        The next requirement is to tell Play how WebJar assets are going to be resolved. Play's
        <a href="#code/conf/routes" class="shortcut">routes</a> file is used to do this.
    </p>

    <p>
        The following route exposes access to the WebJar assets:
        <pre><code>GET        /webjars/*file                    controllers.WebJarAssets.at(file)</code></pre>
    </p>
</div>
<div>
    <h2>Setup: Server-Side Templates</h2>
    
    <p>
        While not required, the easiest way to setup a webpage to use WebJars, RequireJS, and AngularJS is with Play's
        server-side templating.  This application provides examples of this approach and the alternative static 
        approach.
    </p>
    
    <p>
        Navigating to <a href="http://localhost:9000/with-server-templating" target="_blank">localhost:9000/with-server-templating</a> will load the page that was generated using server-side templating.  The <a href="#code/conf/routes" class="shortcut">routes</a> file maps that URL to the <code>dynamicIndex</code> method in the <a href="#code/app/controllers/Application.scala" class="shortcut">Application controller</a> which uses the <a href="#code/app/views/DynamicIndex.scala.html" class="shortcut">DynamicIndex.scala.html</a> template to render the webpage.  That template uses a helper in <code>webjars-play</code> to setup RequireJS and load the main JavaScript app:
        <pre><code>@Html(org.webjars.play.RequireJS.setup("js/app"))</code></pre>
        If you view the source of the <code>with-server-templating</code> page in your browser you will see generated <code>script</code> tags that do all of the setup.  The one parameter to the <code>RequireJS.setup</code> method is the main JavaScript app, which in this case is the <a href="#code/public/js/app.js" class="shortcut">public/js/app.js</a> file.  In this case that JavaScript app uses RequireJS to load AngularJS and set it up.
    </p>
</div>

<div>
    <h2>Setup: Static HTML</h2>
    
    <p>
        Navigating to <a href="http://localhost:9000/without-server-templating" target="_blank">localhost:9000/without-server-templating</a> will load a static asset which setups up RequireJS and AngularJS.  There are two <a href="#code/conf/routes" class="shortcut">routes</a> that are used for this:
        <pre><code>GET        /without-server-templating        controllers.Assets.at(path="/public", file="static-index.html")
GET        /setup-requirejs                  controllers.Application.setupRequireJs()</code></pre>
        The first maps the <code>/without-server-templating</code> URL to the static asset controller and the <a href="#code/public/static-index.html" class="shortcut">public/static-index.html</a> file.  The second <code>setup-requirejs</code> route uses a <code>setupRequireJs</code> method in the <a href="#code/app/controllers/Application.scala" class="shortcut">Application controller</a> to provide a way to get the RequireJS configuration from the <code>webjars-locator</code> utility.  To use this in a static webpage, simply do:
        <pre><code>&lt;script src="/setup-requirejs"&gt;&lt;/script&gt;</code></pre>
    
        Then to run <a href="#code/public/js/app.js" class="shortcut">public/js/app.js</a> using RequireJS do:
        <pre><code>&lt;script data-main="js/app" src="/webjars/requirejs/2.1.10/require.min.js"&gt;&lt;/script&gt;</code></pre>
    </p>
    
</div>

<div>
    <h2>Setup: AngularJS</h2>
    
    <p>
        The <a href="#code/public/js/app.js" class="shortcut">app.js</a> file uses RequireJS to load AngularJS and setup the different parts of the application:
        <pre><code>require(['angular', './controllers', './directives', './filters', './services', 'angular-route'],
  function(angular, controllers) {</code></pre>
    
        The <code>angular</code> and <code>angular-route</code> references use the modules defined by the WebJars setup done in the previous sections.  The other references that are prefixed with <code>./</code> are relative to the <code>app.js</code> file.
    </p>
    
</div>

<div>
    <h2>
        JsLint Happiness
    </h2>

    <p>
        You'll notice a comment, <code>/*global ...</code> in the <a href="#code/public/js/app.js" class="shortcut">app.js</a> file that tells <a href="http://www.jslint.com/lint.html" target="_blank">JsLint</a> what globals are assigned from other JavaScript files. Not having this declaration would result in warnings in our code.
    </p>
</div>

<div>
    <h2>
        Conclusion
    </h2>

    <p>
        This tutorial has taken you through the requirements of a Play application in order to use AngularJS,
        RequireJS and WebJars in the context of the Play Framework.
    </p>

    <p>
        We intend to enhance the JavaScript development experience further with the goal of making Play the #1
        choice for web development.
    </p>

    <p>
        Happy Play-ing with AngularJS!
    </p>
</div>
</body>
</html>
